!function(e,t){"use strict";e.module("jett.ionic.scroll.sista",["ionic"]).directive("scrollSista",function(a,r){var n="400ms",o=t.Platform.isAndroid()?!1:!0;return{restrict:"A",link:function(i,s,c){function l(e,a,r){r&&(e.style[t.CSS.TRANSITION_DURATION]=r),e.style[t.CSS.TRANSFORM]="translate3d(0, "+-a+"px, 0)"}function u(){h=0,S=0,m=0}function d(){if(p=q.querySelector('[nav-bar="cached"] .bar-header'),y=q.querySelector('[nav-bar="active"] .bar-header'))switch(v=y.offsetHeight,M=v,A=q.querySelector(".tabs"),A&&(N=A.offsetHeight,A.parentNode.classList.contains("tabs-top")?(O=!0,M+=N):A.parentNode.classList.contains("tabs-bottom")&&(w=!0)),g=q.querySelector(".bar-subheader"),g&&(x=g.offsetHeight,M+=x),k=2*M,H=R=T=k,N=N||0,x=x||0,c.scrollSista){case"header":T=v,R=O?v:0;break;case"header-tabs":F=O?N:0,T=O?v+N:v;break;case"tabs-subheader":H=0,F=O?M-v:x,I=O?x:0;break;case"tabs":H=0,T=O?N:0;break;case"subheader":H=0,R=0;break;default:F=O?M-v:x,I=O?x:0}}function f(a,r){var n=1-a/v;l(y,a,r),e.forEach(y.children,function(e){e.style.opacity=n,o&&(e.style[t.CSS.TRANSFORM]="scale("+n+","+n+")")}),l(p,a,r)}function b(e,a){var r,n,o=s[0].style,i=e>F?e-F:0;t.requestAnimationFrame(function(){g&&(n=e>L?e-L:0,l(g,Math.min(T,n),a)),A&&(r=Math.min(R,e>I?e-I:0),w&&(r=-r,o.bottom=Math.max(0,N-e)+"px"),l(A,r,a)),f(Math.min(H,i),a),o.top=Math.max(0,M-e)+"px"})}var h,S,m,p,y,v,M,g,x,A,N,k,H,R,T,q=a[0].body,$=c.delegateHandle?r.$getByHandle(c.delegateHandle):r,C=$.getScrollView(),O=!1,w=!1,F=0,I=0,L=0;u(),i.$on("scroll.refreshComplete",function(){u()}),i.$parent.$on("$ionicView.leave",function(){var e=s[0].style.top;e&&e!==M+"px"&&(b(0),u())}),s.bind("scroll",function(e){p&&y||d();var t=0,a=e.detail.scrollTop;h=a>=0?Math.min(k,Math.max(0,h+a-m)):0,C.getScrollMax().top-a<=M&&(h=0,t=n),m=a,S!==h&&(S=h,b(h,t))})}}})}(angular,ionic);