!function(t){"use strict";t.module("jett.ionic.scroll.sista",["ionic"]).directive("scrollSista",function(n,e){var o,a="400ms",i=function(t,n,e){e&&(t.style[ionic.CSS.TRANSITION_DURATION]=e),t.style[ionic.CSS.TRANSFORM]="translate3d(0, "+n+"px, 0)"};return o="android"===ionic.Platform.platform()?function(t,n){t.style.opacity=n}:function(t,n){t.style.opacity=n,t.style[ionic.CSS.TRANSFORM]="scale("+n+","+n+")"},{restrict:"A",link:function(c,r,l){function s(){S=0,h=0,p=0,m=.4}function f(){if(y=N.querySelector('[nav-bar="cached"] .bar-header'),b=N.querySelector('[nav-bar="active"] .bar-header')){v=b.offsetHeight,x=v;var t,n=N.querySelector(".tabs");n&&(t=n.parentNode.classList,M=n.offsetHeight,t.contains("tabs-top")?(H=!0,x+=M,g=A?function(t,e){i(n,-t,e)}:function(t,e){i(n,Math.max(-v,-t),e)}):t.contains("tabs-bottom")&&(g=A&&function(t,e,o){o.bottom=Math.max(0,M-t)+"px",i(n,Math.min(M,t),e)}))}}function u(n,e){var a=1-n/v;i(b,-n,e),t.forEach(b.children,function(t){o(t,a)}),i(y,-n,e)}function d(t,n){var e=r[0].style;ionic.requestAnimationFrame(function(){A&&H&&t>0?t>=M&&u(t-M,n):u(t,n),g&&g(t,n,e),e.top=Math.max(0,x-t)+"px"})}var S,h,m,p,y,b,v,x,M,g,A="header-and-tabs"===l.scrollSista,N=n[0].body,R=l.delegateHandle?e.$getByHandle(l.delegateHandle):e,T=R.getScrollView(),H=!1;s(),c.$on("scroll.refreshComplete",function(){s()}),c.$parent.$on("$ionicView.leave",function(){var t=r[0].style.top;t&&t!==x+"px"&&(d(0),s())}),r.bind("scroll",function(t){y&&b||f();var n=0,e=t.detail.scrollTop;S=e>=0?Math.min(v/m,Math.max(0,S+e-p)):0,T.getScrollMax().top-e<=x&&(S=0,n=a),p=e,h!==S&&(h=S,d(S,n))})}}})}(angular);